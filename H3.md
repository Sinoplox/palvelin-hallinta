# H3 tehtävä

## X)

Two Machine Virtual Network With Debian 11 Bullseye and Vagrant

- Vagrantin asennus
- Malli Vagrantfile:stä (kokeilen varmaankin tällä)
- Vagrantilla virtuaalikoneen luominen ja siihen yhdistäminen SSH:lla
- Verkon toimivuuden kokeilu pingillä ja virtuaalikoneen tuhoaminen

Salt Quickstart – Salt Stack Master and Slave on Ubuntu Linux

- Salt masterin asennus ja sen käyttämät portit (4505,4506 tcp)
- Salt minionin asennus, masterin ip:n lisäys minion tiedostoon ja ID
- Avainten hyväksyminen master:illa
- Eri komentojen kokeilu masterilta minioneille

Salt Vagrant - automatically provision one master and two slaves

- Ympäristön asentaminen (Vagrant, virtualbox)
- Valmis malli vagrantfile:stä kolmelle virtuaalikoneelle
- Kolmen virtuaalikoneen päälle kytkeminen
- Avainten hyväksyminen masteri:lla
- Minionien komentaminen ja niitten tietojen kerääminen
- Idempotenssi
- Paljon esimerkkejä komennoista
- Konfiguraatiotiedoston tekeminen


## A)

Asensin vagrant komennolla sudo apt install vagrant

<img width="353" height="35" alt="image" src="https://github.com/user-attachments/assets/876995ca-5235-4edf-a1c4-4f05ee33297a" />

Yritin asentaa virtualbox komennolla sudo apt install virtualbox, sain virheen että semmoista pakettia ei ole olemassa.
Menin virtualboxin sivuille katsomaan ohje asennukseen linuxilla ja sain 502 bad gateway.

<img width="1913" height="154" alt="image" src="https://github.com/user-attachments/assets/be93551a-d1d0-44e2-9d69-ec1ca202d4f5" />

Löysin 30 eri tutorialin jälkeen oikean ja lisäsin

deb [arch=amd64 signed-by=/usr/share/keyrings/oracle-virtualbox-2016.gpg] https://download.virtualbox.org/virtualbox/debian trixie contrib

mun sources.list tiedostoon.

tämän jälkeen ajoin 

wget -O- https://www.virtualbox.org/download/oracle_vbox_2016.asc | sudo gpg --yes --output /usr/share/keyrings/oracle-virtualbox-2016.gpg --dearmor

jotta lisään avaimen.

Tämän jälkeen tein sudo apt update ja sudo apt install virtualbox-7.2 ja sain sen asennettua.

<img width="275" height="41" alt="image" src="https://github.com/user-attachments/assets/68e4e331-aa81-4313-a176-e9c9464b3b94" />

## B)

Miljoonan ongelman jälkeen luovutin koko linux paska roskiin ja asensin vagrant windowsille.
<img width="918" height="57" alt="image" src="https://github.com/user-attachments/assets/fe898acf-00de-4d41-a040-b82eee25e1c4" />

## C D ja E)

Sain kolme virtuaalikonetta toimii ja lähettää avainpyyntö masterille (en tiiä miks toi bugas ja siin o kaks node2 mut ni)

<img width="507" height="180" alt="image" src="https://github.com/user-attachments/assets/bfa6b828-8131-4e59-a234-4ad4fc604bb8" />

otin avaimet vastaan

<img width="457" height="79" alt="image" src="https://github.com/user-attachments/assets/58ecbe54-12fe-42d4-8bee-d1c9f3cfdb41" />

file.managed tila verkon yli:

<img width="1038" height="808" alt="image" src="https://github.com/user-attachments/assets/fb3de6a4-e468-4ad3-a4d7-7555286d4557" />

pkg.installed tila verkon yli:

<img width="848" height="401" alt="image" src="https://github.com/user-attachments/assets/abfa28c8-6469-429d-bd2f-37115c43a576" />

(en pistäny kokonaan koska jättimäinen mutta se kyllä toimi)

node1 voi pingaa node2 (niin myös toisin päin)

<img width="617" height="162" alt="image" src="https://github.com/user-attachments/assets/e1ce8418-526a-4c9c-b53d-435a9f251b73" />



## lähteet

https://terokarvinen.com/2021/two-machine-virtual-network-with-debian-11-bullseye-and-vagrant/

https://terokarvinen.com/2018/salt-quickstart-salt-stack-master-and-slave-on-ubuntu-linux/?fromSearch=salt%20quickstart%20salt%20stack%20master%20and%20slave%20on%20ubuntu%20linux

https://terokarvinen.com/2023/salt-vagrant/#infra-as-code---your-wishes-as-a-text-file

https://terokarvinen.com/palvelinten-hallinta/
